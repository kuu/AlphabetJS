<!DOCTYPE html>
<html>
	<head>
		<title>AlphabetJS Tester</title>
		<script type="text/javascript" src="../Source/BitIO.js"></script>
		<script type="text/javascript" src="../Source/VM.js"></script>
		<script type="text/javascript" src="../Source/Parser.js"></script>
		<script type="text/javascript" src="Basic.js"></script>
		<script type="text/javascript">
		// <![CDATA[
		
		var vm = null,
			parser = null;
		            
		function onGo(e) {
            var type = document.getElementById("type").value,
                url = document.getElementById("url").value;
            e.preventDefault();
            if (type === "file") {
                var fr = new FileReader();
                var file = document.getElementById("file").files[0];
                fr.onload = function(e) {
                	vm = new AlphabetJS.VM();
                	parser = new AlphabetJS.Parser(vm, e.target.result);
                };                fr.onerror = function(e) {
                	console.error(e);
                };
                fr.readAsBinaryString(file);
            } else {
            }
        }

        document.addEventListener("DOMContentLoaded", function() {
            document.getElementById("go").addEventListener("click", onGo, false);
        }, false);
        // ]]>
		</script>
	</head>
	<body>
		<div id="options" style="position:absolute;z-index:999999999999;bottom:0;left:0">
	        <select id="type">
	            <option value="file">File</option>
	            <option value="ajax">Ajax</option>
	        </select>
	        <input type="text" id="url" />
	        <input type="file" id="file" name="file" />
	        <input type="submit" id="go" value="Go" />
	    </div>
	</body>
</html>