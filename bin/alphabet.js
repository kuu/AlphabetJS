'use strict';(function(d){function f(a){this.bbl=this.bb=this.i=0;if("string"===typeof a){var b,j=a.length,g=0;for(b=c?this.b=new Uint8Array(j):this.b=Array(j);g<j;g++)b[g]=a.charCodeAt(g)&&255}else this.b=a.__proto__===Array.prototype?c?new Uint8Array(a):a:a;this.fileSize=a.length}d.Breader=f;var c=void 0!==d.Uint8Array?!0:!1;f.prototype={sub:function(a,b){return c?new Uint8Array(this.b.buffer,a,b):this.b.slice(a,a+b)},a:function(){0!==this.bbl&&(this.bbl=this.bb=0)},seek:function(a){this.a();if(this.i+
a>this.fileSize)throw Error("Index out of bounds");this.i+=a},seekTo:function(a){this.a();if(a>this.fileSize)throw Error("Index out of bounds");this.i=a},tell:function(){return this.i},peekBits:function(a){for(var b=this.b,c=this.i,g=this.bb,e=this.bbl,d=0;e<a;){d=b[c++];if(void 0===d)throw Error("Index out of bounds");g=g<<8|d;e+=8}return g>>>e-a},bp:function(a){for(var b=this.b,c=this.i,g=this.bb,e=this.bbl,d=0;e<a;){d=b[c++];if(void 0===d)throw Error("Index out of bounds");g=g<<8|d;e+=8}this.bb=
g&(1<<e)-1&(1<<e-a)-1;this.bbl=e-a;this.i=c;return g>>>e-a},fpb16p:function(a){return 1.52587890625E-5*this.bsp(a)},fpb8p:function(a){return 0.00390625*this.bsp(a)},F32:function(){var a=this.i;if(a+4>this.fileSize)throw Error("Index out of bounds.");this.i+=4;return(new DataView(this.b.buffer,this.b.byteOffset+a,4)).getFloat32(0,!0)},F64:function(){var a=this.i;if(a+8>this.fileSize)throw Error("Index out of bounds.");this.i+=8;return(new DataView(this.b.buffer,this.b.byteOffset+a,8)).getFloat64(0,
!0)},bsp:function(a){var b=this.bp(a);b>>a-1&&(b-=1<<a);return b},B:function(){var a=this.b[this.i];if(void 0===a)throw Error("Index out of bounds.");this.i++;return a},I16:function(){var a=this.b,b=this.i;if(b+2>this.fileSize)throw Error("Index out of bounds.");a=a[b]|a[b+1]<<8;this.i+=2;return a},I32:function(){var a=this.b,b=this.i;if(b+4>this.fileSize)throw Error("Index out of bounds.");a=a[b+3]<<24>>>0|a[b+2]<<16|a[b+1]<<8|a[b];this.i+=4;return a},SI16:function(){var a=this.I16();a>>15&&(a-=
65536);return a},SI32:function(){var a=this.I32();a>>31&&(a-=Math.pow(2,32)-1);return a},c:function(){var a=this.b[this.i];if(void 0===a)throw Error("Index out of bounds.");this.i++;return String.fromCharCode(a)},s:function(){for(var a="",b=this.b,c=this.i,g=0;;c++){g=b[c];if(0===g){c++;break}else if(void 0===g)throw Error("Index out of bounds.");a+=String.fromCharCode(g)}this.i=c;return a},sp:function(a){var b="",c=this.b,g=this.i,a=a+g;if(a>this.fileSize)throw Error("Index out of bounds.");for(;g<
a;g++)b+=String.fromCharCode(c[g]);this.i=g;return b}}})(this);(function(d){function f(a){this.bbl=this.bb=this.i=0;if("string"===typeof a){var b,j=a.length,g=0;for(b=c?this.b=new Uint8Array(j):this.b=Array(j);g<j;g++)b[g]=a.charCodeAt(g)&&255}else this.b=a.__proto__===Array.prototype?c?new Uint8Array(a):a:a;this.fileSize=a.length}d.Breader=f;var c=void 0!==d.Uint8Array?!0:!1;f.prototype={sub:function(a,b){return c?new Uint8Array(this.b.buffer,a,b):this.b.slice(a,a+b)},a:function(){0!==this.bbl&&(this.bbl=this.bb=0)},seek:function(a){this.a();if(this.i+a>this.fileSize)throw Error("Index out of bounds");
this.i+=a},seekTo:function(a){this.a();if(a>this.fileSize)throw Error("Index out of bounds");this.i=a},tell:function(){return this.i},peekBits:function(a){for(var b=this.b,c=this.i,g=this.bb,e=this.bbl,d=0;e<a;){d=b[c++];if(void 0===d)throw Error("Index out of bounds");g=g<<8|d;e+=8}return g>>>e-a},bp:function(a){for(var b=this.b,c=this.i,g=this.bb,e=this.bbl,d=0;e<a;){d=b[c++];if(void 0===d)throw Error("Index out of bounds");g=g<<8|d;e+=8}this.bb=g&(1<<e)-1&(1<<e-a)-1;this.bbl=e-a;this.i=c;return g>>>
e-a},fpb16p:function(a){return 1.52587890625E-5*this.bsp(a)},fpb8p:function(a){return 0.00390625*this.bsp(a)},F32:function(){var a=this.i;if(a+4>this.fileSize)throw Error("Index out of bounds.");this.i+=4;return(new DataView(this.b.buffer,this.b.byteOffset+a,4)).getFloat32(0,!0)},F64:function(){var a=this.i;if(a+8>this.fileSize)throw Error("Index out of bounds.");this.i+=8;return(new DataView(this.b.buffer,this.b.byteOffset+a,8)).getFloat64(0,!0)},bsp:function(a){var b=this.bp(a);b>>a-1&&(b-=1<<a);
return b},B:function(){var a=this.b[this.i];if(void 0===a)throw Error("Index out of bounds.");this.i++;return a},I16:function(){var a=this.b,b=this.i;if(b+2>this.fileSize)throw Error("Index out of bounds.");a=a[b]|a[b+1]<<8;this.i+=2;return a},I32:function(){var a=this.b,b=this.i;if(b+4>this.fileSize)throw Error("Index out of bounds.");a=a[b+3]<<24>>>0|a[b+2]<<16|a[b+1]<<8|a[b];this.i+=4;return a},SI16:function(){var a=this.I16();a>>15&&(a-=65536);return a},SI32:function(){var a=this.I32();a>>31&&
(a-=Math.pow(2,32)-1);return a},c:function(){var a=this.b[this.i];if(void 0===a)throw Error("Index out of bounds.");this.i++;return String.fromCharCode(a)},s:function(){for(var a="",b=this.b,c=this.i,g=0;;c++){g=b[c];if(0===g){c++;break}else if(void 0===g)throw Error("Index out of bounds.");a+=String.fromCharCode(g)}this.i=c;return a},sp:function(a){var b="",c=this.b,g=this.i,a=a+g;if(a>this.fileSize)throw Error("Index out of bounds.");for(;g<a;g++)b+=String.fromCharCode(c[g]);this.i=g;return b}}})(this);
(function(d){var f=d.AlphabetJS={createProgram:function(c){c=f.programs[c];return void 0!==c?new c:null},createLoader:function(c){c=f.loaders[c];return void 0!==c?new c:null},programs:{},loaders:{}}})(this);(function(d){function f(){}d.AlphabetJS.Program=f;f.prototype.run=function(){}})(this);(function(d){function f(){}d.AlphabetJS.Loader=f;f.prototype.load=function(){}})(this);
(function(d){function f(a){this.ast={type:"literal",what:"function",body:[]};this.previousAST=null;this.parentAST=this.ast;this.astPointer=this.ast.body;this.astPointerStack=[];this.functionMap=a}function c(a){return Array(a+1).join("  ")}d.AlphabetJS.ASTFactory=f;f.prototype.expression=function(a,b,c){var g=this.expressions;return!(a in g)?"":g[a].call(this,b,c)};f.prototype.literal=function(a,b,c){var g=this.literals;return!(a in g)?"":g[a].call(this,b,c)};f.prototype.expressions={raw:function(a){return a.value},
declare:function(a,b){return"var "+a.name+(void 0!==a.value?" = "+this.expression(a.value.type,a.value,b):"")+";"},assign:function(a,b){return this.expression(a.left.type,a.left,b)+" = "+this.expression(a.right.type,a.right,b)+";"},literal:function(a,b){return this.literal(a.what,a,b)},comment:function(a){return"/*"+a.value+"*/"},call:function(a,b){var c=this.expression(a.value.type,a.value,b)+"(";if(void 0!==a.args)for(var g=a.args,e=0,d=g.length;e<d;e++)c+=this.expression(g[e].type,g[e],b),e!==
d-1&&(c+=", ");return c+")"},property:function(a,b){return this.expression(a.left.type,a.left,b)+"["+this.expression(a.right.type,a.right,b)+"]"},add:function(a,b){return this.expression(a.left.type,a.left,b)+" + "+this.expression(a.right.type,a.right,b)},subtract:function(a,b){return this.expression(a.left.type,a.left,b)+" - "+this.expression(a.right.type,a.right,b)},multiply:function(a,b){return this.expression(a.left.type,a.left,b)+" * "+this.expression(a.right.type,a.right,b)},divide:function(a,
b){return this.expression(a.left.type,a.left,b)+" / "+this.expression(a.right.type,a.right,b)},equals:function(a,b){return this.expression(a.left.type,a.left,b)+" === "+this.expression(a.right.type,a.right,b)},roughly_equals:function(a,b){return this.expression(a.left.type,a.left,b)+" == "+this.expression(a.right.type,a.right,b)},less:function(a,b){return this.expression(a.left.type,a.left,b)+" < "+this.expression(a.right.type,a.right,b)},and:function(a,b){return this.expression(a.left.type,a.left,
b)+" && "+this.expression(a.right.type,a.right,b)},or:function(a,b){return this.expression(a.left.type,a.left,b)+" || "+this.expression(a.right.type,a.right,b)},not:function(a,b){return"!("+this.expression(a.value.type,a.value,b)+")"},branch:function(a,b){var j=a.what+" (!("+this.expression(a.condition.type,a.condition,b)+")) {\n",g=a.body,e=g.length;b++;for(var d=0;d<e;d++){var i=g[d],j=j+(c(b)+this.expression(i.type,i,b));"branch"!==i.type&&"else"!==i.type&&(j+=";");j+="\n"}return j+c(b-1)+"}"},
"else":function(a,b){var j="else {\n",g=a.body,e=g.length;b++;for(var d=0;d<e;d++){var i=g[d],j=j+(c(b)+this.expression(i.type,i,b));"branch"!==i.type&&"else"!==i.type&&(j+=";");j+="\n"}return j+c(b-1)+"}"}};f.prototype.literals={"function":function(a,b){var j=a.body,d=j.length,e=Array(d);b++;for(var f=0;f<d;f++){var i=j[f],h=c(b)+this.expression(i.type,i,b);"branch"!==i.type&&"else"!==i.type&&(h+=";");e[f]=h}return c(b-1)+"function"+(void 0!==a.name?" "+a.name:"")+"() {\n"+e.join("\n")+"\n"+c(b-
1)+"}"},reference:function(a){return a.value},"this":function(){return"this"},object:function(a,b){var c="{",d=!0,e=a.value,f;for(f in e)d?d=!1:c+=", ",c+="'"+f+"': "+this.expression(e[f].type,e[f],b);return c+"}"},array:function(a,b){for(var c="[",d=!0,e=a.value,f=0,i=e.length;f<i;f++)d?d=!1:c+=", ",c+=this.expression(e[f].type,e[f],b);return c+"]"},string:function(a){a=a.value;a=a.replace(/\n/g,"\\n").replace(/'/g,"\\'");return"'"+a+"'"},number:function(a){return a.value},"boolean":function(a){return a.value}};
f.prototype.add=function(a){var b=this.previousAST;a.parent=this.parentAST;null!==b&&(b.next=a);a.previous=b;this.previousAST=a;this.astPointer.push(a)};f.prototype.createMapped=function(a,b){function c(a,b){for(var e in a)a[e].__proto__===Array.prototype?(b[e]=Array(a[e].length),d(a[e],b[e])):"object"===typeof a[e]?(b[e]={},c(a[e],b[e])):b[e]=a[e]}function d(a,b){for(var e=0,f=a.length;e<f;e++)a[e].__proto__===Array.prototype?(b[e]=Array(a[e].length),d(a[e],b[e])):"object"===typeof a[e]?(b[e]={},
c(a[e],b[e])):b[e]=a[e]}var e=this.functionMap[a];if(void 0===e)return{type:"comment",value:"Unknown function in function map: "+a};var f={};c(e,f);"call"===f.type&&(b||(b={}),b.currentTarget={type:"literal",what:"reference",value:"tTarget"},f.args=[{type:"literal",what:"object",value:b}]);return f};f.prototype.enter=function(a){this.previousAST=null;this.astPointerStack.push(this.parentAST);this.parentAST=a;this.astPointer=a.body};f.prototype.leave=function(){var a=this.astPointer=(this.parentAST=
this.astPointerStack.pop()).body;this.previousAST=a[a.length-1]||null};f.prototype.createJavaScript=function(a){for(var b=Array(a.length),c=0,d=a.length;c<d;c++)b[c]=this.expression(a[c].type,a[c],0);console.log(b.join("\n"));return b.join("\n")};f.prototype.getFunction=function(){return new Function(this.createJavaScript(this.ast.body))}})(this);(function(d){function f(){}d=d.AlphabetJS;d.programs.AS1=f;f.prototype=Object.create(d.Program.prototype)})(this);
(function(d){var f=d.AlphabetJS,d=f.loaders.AS1.handlers;d[0]=function(c,a,b){var c=b.tempStackByteOffsets,a=b.byteToASTMap,d=b.byteToASTMapIndicies,g=0,e,f=0;b.currentAST=b.astPointer[b.astPointer.length-1];for(e=c.length;g<e;g++)f=c[g],a[f]={ast:tCurrentAST,index:d.push(f)-1};c.length=0;a[b.byteOffset]={ast:tCurrentAST,index:d.push(b.byteOffset)-1};return!1};d[4]=function(c,a,b){b.currentAST=a.createMapped("nextFrame")};d[5]=function(c,a,b){b.currentAST=a.createMapped("previousFrame")};d[6]=function(c,
a,b){b.currentAST=a.createMapped("play")};d[7]=function(c,a,b){b.currentAST=a.createMapped("stop")};d[8]=function(c,a,b){b.currentAST={type:"comment",value:"Unimplemented ToggleQuality here!"}};d[9]=function(c,a,b){b.currentAST={type:"comment",value:"Unimplemented StopSounds here!"}};d[10]=function(c,a,b){c=b.tempStack;a=b.tempStackIndex;c[a-1]={type:"add",left:b.toFloat(c[a--]),right:b.toFloat(c[a])};b.tempStackIndex=a};d[11]=function(c,a,b){c=b.tempStack;a=b.tempStackIndex;c[a-1]={type:"subtract",
right:b.toFloat(c[a--]),left:b.toFloat(c[a])};b.tempStackIndex=a};d[12]=function(c,a,b){c=b.tempStack;a=b.tempStackIndex;c[a-1]={type:"multiply",left:b.toFloat(c[a--]),right:b.toFloat(c[a])};b.tempStackIndex=a};d[13]=function(c,a,b){c=b.tempStack;a=b.tempStackIndex;c[a-1]={type:"divide",right:b.toFloat(c[a--]),left:b.toFloat(c[a])};b.tempStackIndex=a};d[14]=function(c,a,b){c=b.tempStack;a=b.tempStackIndex;c[a-1]={type:"equals",left:b.toFloat(c[a--]),right:b.toFloat(c[a])};b.tempStackIndex=a};d[15]=
function(c,a,b){c=b.tempStack;a=b.tempStackIndex;c[a-1]={type:"less",right:b.toFloat(c[a--]),left:b.toFloat(c[a])};b.tempStackIndex=a};d[16]=function(c,a,b){c=b.tempStack;a=b.tempStackIndex;c[a-1]={type:"and",left:b.toFloat(c[a--]),right:b.toFloat(c[a])};b.tempStackIndex=a};d[17]=function(c,a,b){c=b.tempStack;a=b.tempStackIndex;c[a-1]={type:"or",left:b.toFloat(c[a--]),right:b.toFloat(c[a])};b.tempStackIndex=a};d[18]=function(c,a,b){c=b.tempStack;a=b.tempStackIndex;c[a]={type:"not",value:b.toFloat(c[a])}};
d[19]=function(c,a,b){c=b.tempStack;a=b.tempStackIndex;c[a-1]={type:"equals",left:b.toString(c[a--]),right:b.toString(c[a])};b.tempStackIndex=a};d[23]=function(c,a,b){b.currentAST=b.tempStack[b.tempStackIndex--]};d[24]=function(c,a,b){c=b.tempStack;b=b.tempStackIndex;c[b]={type:"call",value:{type:"raw",value:"Math.floor"},args:[c[b]]}};d[28]=function(c,a,b){c=b.tempStack;b=b.tempStackIndex;c[b]=a.createMapped("getVariable",{name:c[b]})};d[29]=function(c,a,b){var c=b.tempStack,d=b.tempStackIndex;b.currentAST=
a.createMapped("setVariable",{value:c[d--],name:c[d--]});b.tempStackIndex=d};d[33]=function(c,a,b){c=b.tempStack;a=b.tempStackIndex;c[a-1]={type:"add",right:b.toString(c[a--]),left:b.toString(c[a])};b.tempStackIndex=a};d[34]=function(c,a,b){var c=b.tempStack,d=b.tempStackIndex;c[tTempStackInde-1]=a.createMapped("getProperty",{property:b.toInt(c[d--]),name:b.toString(c[d--])});b.tempStackIndex=d};d[35]=function(c,a,b){var c=b.tempStack,d=b.tempStackIndex;b.currentAST=a.createMapped("setProperty",{value:c[d--],
property:b.toInt(c[d--]),name:b.toString(c[d])});b.tempStackIndex=d};d[36]=function(c,a,b){var c=b.tempStack,d=b.tempStackIndex;b.currentAST=a.createMapped("cloneSprite",{depth:b.toInt(c[d--]),target:b.toString(c[d--]),name:b.toString(c[d--])});b.tempStackIndex=d};d[37]=function(c,a,b){c=b.tempStackIndex;b.currentAST=a.createMapped("removeSprite",{name:b.toString(b.tempStack[c--])});b.tempStackIndex=c};d[38]=function(c,a,b){b.currentAST=a.createMapped("trace",{message:b.tempStack[b.tempStackIndex--]})};
d[39]=function(c,a,b){b.currentAST={type:"comment",value:"Unimplemented StartDrag here!"}};d[40]=function(c,a,b){b.currentAST={type:"comment",value:"Unimplemented EndDrag here!"}};d[41]=function(c,a,b){c=b.tempStack;a=b.tempStackIndex;c[a-1]={type:"less",right:b.toString(c[a--]),left:b.toString(c[a])};b.tempStackIndex=a};d[45]=function(c,a,b){var c=b.tempStack,d=b.tempStackIndex,g=new f.ASTFactory;g.add(c[d--]);g=(parseInt(g.getFunction()(),10)||1)-1;c[d-g]=a.createMapped("fscommand2",{name:c[d],
args:{type:"literal",what:"array",value:c.slice(d-g,d).reverse()}});b.tempStackIndex=d-g};d[48]=function(c,a,b){var c=b.tempStack,d=b.tempStackIndex;c[d]={type:"raw",value:"((Math.random() * ("+a.createJavaScript(b.toFloat(c[d]))+" - 1)) + 0.5) | 0"}};d[20]=d[49]=function(c,a,b){c=b.tempStack;a=b.tempStackIndex;c[a]={type:"property",left:b.toString(c[a]),right:{type:"literal",what:"string",value:"length"}}};d[50]=function(c,a,b){b.currentAST={type:"comment",value:"Unimplemented CharToAscii here!"}};
d[51]=function(c,a,b){b.currentAST={type:"comment",value:"Unimplemented AsciiToChar here!"}};d[52]=function(c,a,b){b.currentAST={type:"comment",value:"Unimplemented GetTime here!"}};d[21]=d[53]=function(c,a,b){var c=b.tempStack,a=b.tempStackIndex,d=c[a--];c[a-1]={type:"call",args:[{type:"subtract",left:b.toInt(c[a--]),right:{type:"literal",what:"number",value:1}},d],value:{type:"property",left:b.toString(c[a]),right:{type:"literal",what:"string",value:"substr"}}};b.tempStackIndex=a};d[54]=function(c,
a,b){b.currentAST={type:"comment",value:"Unimplemented MBCharToAscii here!"}};d[55]=function(c,a,b){b.currentAST={type:"comment",value:"Unimplemented MBAsciiToChar here!"}};d[129]=function(c,a,b){b.currentAST=a.createMapped("gotoFrame",{frame:{type:"literal",what:"number",value:c.I16()}})};d[131]=function(c,a,b){c.s();c.s();b.currentAST={type:"comment",value:"Unimplemented GetURL here!"}};d[138]=function(c,a,b){c.I16();c.B();b.currentAST={type:"comment",value:"Unimplemented WaitForFrame here!"}};
d[139]=d[32]=function(c,a,b){b.currentAST={type:"assign",left:{type:"literal",what:"reference",value:"tTarget"},right:a.createMapped("setTarget",{target:139===b.actionCode?{type:"literal",what:"string",value:c.s()}:b.toString(b.tempStack[b.tempStackIndex--])})}};d[140]=function(c,a,b){b.currentAST=a.createMapped("gotoLabel",{frame:{type:"literal",what:"string",value:c.s()}})};d[141]=function(c,a,b){c.B();b.currentAST={type:"comment",value:"Unimplemented WaitForFrame2 here!"}};d[150]=function(c,a,
b){var d,g;switch(c.B()){case 0:d=c.s();g="string";break;case 1:d=c.F32();g="number";break;case 4:d=c.B();g="number";break;case 5:d=c.B()?!0:!1;g="boolean";break;case 6:d=c.F64();g="number";break;case 7:d=c.I32();g="number";break;case 8:d=c.B();g="number";break;case 9:d=c.I16(),g="number"}b.tempStack[++b.tempStackIndex]={type:"literal",what:g,value:d}};d[153]=function(c,a,b){b.jumpCodeOffsets.push(b.byteOffset);b.jumpTargets.push(c.SI16())};d[154]=function(c,a,b){c.bp(2);c.bp(4);c.bp(1);c.bp(1);c.a();
b.currentAST={type:"comment",value:"Unimplemented GetURL2 here!"}};d[157]=function(c,a,b){var d=b.byteOffset,g=b.tempStack,e=b.tempStackIndex,f=b.byteToASTMap,i=b.byteToASTMapIndicies,h=b.tempStackByteOffsets;b.ifTargetStack.push(b.ifTarget);b.ifTarget=d+c.SI16()+b.actionLength+3;c={type:"branch",what:"if",condition:g[e--],body:[]};a.add(c);a.enter(c);for(var g=0,k=h.length;g<k;g++)a=h[g],f[a]={ast:c,index:i.push(a)-1};h.length=0;f[d]={ast:c,index:i.push(d)-1};b.tempStackIndex=e;return!0};d[158]=
function(c,a,b){b.currentAST=a.createMapped("call",{frame:b.tempStack[b.tempStackIndex--]})};d[159]=function(c,a,b){c.bp(6);var d=c.bp(1);c.bp(1);c.a();1===d&&(d=c.I16());b.currentAST=a.createMapped("gotoFrameOrLabel",{frame:b.tempStack[b.tempStackIndex--],bias:{type:"literal",what:"number",value:d}})}})(this);
(function(d){function f(){}var c=d.Breader,a=d.AlphabetJS;a.loaders.AS1Decompiler=f;a.loaders.AS2Decompiler=f;f.handlers=Array(256);f.prototype=Object.create(a.Loader.prototype);f.prototype.load=function(b,d,g,e){var p=new c(d),i=p.fileSize,g=new a.ASTFactory(g),h=f.handlers,k,n,r,l={startPointer:p.tell(),byteToASTMap:Array(i),byteToASTMapIndicies:[],currentAST:void 0,byteOffset:0,ifTarget:-1,ifTargetStack:[],jumpCodeOffsets:[],jumpTargets:[],tempStack:[],tempStackIndex:-1,tempStackByteOffsets:[],
actionCode:0,actionLength:0,getBooleanLiteral:function(a){return 4>=e?{type:"literal",what:"number",value:a?1:0}:{type:"literal",what:"boolean",value:a?!0:!1}},toNumber:function(a,b){return{type:"or",left:{type:"call",value:{type:"literal",what:"reference",value:"parse"+b},args:[a,{type:"literal",what:"number",value:10}]},right:{type:"literal",what:"number",value:0}}},toFloat:function(a){return toNumber(a,"Float")},toInt:function(a){return toNumber(a,"Int")},toString:function(a){return{type:"or",
left:a,right:{type:"literal",what:"string",value:""}}}},m=0;r=0;var t,q=l.tempStackByteOffsets,d=l.byteToASTMap,s=l.byteToASTMapIndicies;for(g.add({type:"declare",name:"tTarget",value:{type:"literal",what:"this"}});(m=l.byteOffset=p.tell())<=i;){k=pState.actionCode=p.B();n=0;127<k&&(n=p.I16());pState.actionLength=n;n=l.currentAST=void 0;l.byteOffset-l.startPointer===l.ifTarget&&(l.ifTarget=l.ifTargetStack.pop(),g.leave());r=h[k];if(void 0!==r){k=r(p,g,l);if(!0===k)continue;else if(!1===k)break;n=
l.currentAST}else console.warn("Unknown action code "+k),l.currentAST={type:"comment",value:"Unknown tag "+k+" here!"};if(void 0!==n){k=0;for(t=q.length;k<t;k++)r=q[k],d[r]={ast:n,index:s.push(r)-1};q.length=0;d[m]={ast:n,index:s.push(m)-1};g.add(n)}else q.push(m)}p=l.jumpCodeOffsets;i=l.jumpTargets;for(k=p.length-1;0<=k;k--)m=p[k],l=d[m],void 0===l?console.error("AS Byte map is bad with offset "+m):(l=l.ast,h=i[k],m=m+h+5,"branch"===l.type&&"if"===l.what||"else if"===l.what?l.what=0>h?"while":"else if":
0<h?(q=d[s[d[m].index-1]].ast,m=l.parent.body,h=m.indexOf(l),q=m.indexOf(q),0>q?console.error("Bad jump target for else."):(l={type:"else"},l.body=m.splice(h,q+1-h,l))):d[m].ast.what="while");b.run=g.getFunction()}})(this);
(function(d){d=d.Breader.prototype;d.ABCVUI30=function(){var d=0,c,a,b=this.b,j=this.i;for(a=0;6>a;a++)if(c=b[j++],d|=(c&127)<<a,0===c>>>7)return this.i=j,d;this.i=j;return d};d.ABCVUI32=function(){var d=0,c,a,b=this.b,j=this.i;for(a=0;6>a;a++)if(c=b[j++],d|=(c&127)<<a,0===c>>>7)return this.i=j,d;this.i=j;return d};d.ABCVSI32=function(){var d=0,c,a,b=this.b,j=this.i;for(a=0;6>a;a++)if(c=b[j++],d|=(c&127)<<a,0===c>>>7)return this.i=j,d;1===d>>31&&(d-=Math.pow(2,32)-1);this.i=j;return d};d.ABCs=function(){var d=
this.ABCVUI30();return this.sp(d)};d.getArray=function(d,c){for(var a=Array(c),b=0;b<c;b++)a[b]=d.call(this);return a};d.getArrays=function(d,c){var a=Array(c),b=d.length,j,g;for(j=0;j<c;j++){a[j]=Array(b);for(g=0;g<b;g++)a[j][g]=d[g].call(this)}return a}})(this);
(function(d){function f(){this.constants={"int":[0],uint:[0],"double":[0],str:[""],namespace:[null],ns_set:[null],multiname:[null]};this.methods=[];this.metadata=[];this.instances=[];this.classes=[];this.scripts=[];this.methodBodies=[]}d=d.AlphabetJS;d.programs.ABC=f;f.prototype=Object.create(d.Program.prototype)})(this);
(function(d){function f(){}var c=d.AlphabetJS,a=d.Breader;c.loaders.ABC=f;f.prototype=Object.create(c.Loader.prototype);f.prototype.load=function(b,c){function d(a){for(var b=Array(a),c=0;c<a;c++){var f=e.ABCVUI30(),g=e.B(),h=g&15,f={name:f,attributes:g>>>4,tKind:h};b[c]=f;switch(h){case 0:case 6:f.slotId=e.ABCVUI30();f.typeName=e.ABCVUI30();f.vIndex=e.ABCVUI30();0!==f.vIndex&&(f.vKind=e.B());break;case 4:f.slotId=e.ABCVUI30();f.classIndex=e.ABCVUI30();break;case 5:f.slotId=e.ABCVUI30();f.functionIndex=
e.ABCVUI30();break;case 1:case 2:case 3:f.dispId=e.ABCVUI30();f.method=e.ABCVUI30();break;default:console.error("Unknown instance trait kind: "+h);return}}return b}var e=new a(c),f=e.I16(),i=e.I16();console.log("Parsing ABC file of version "+i+"."+f);a:{f=e.ABCVUI30();i=b.constants.int;i.length=f;for(var h=1;h<f;h++)i[h]=e.ABCVSI32();f=e.ABCVUI30();i=b.constants.uint;i.length=f;for(h=1;h<f;h++)i[h]=e.ABCVUI32();f=e.ABCVUI30();i=b.constants.double;i.length=f;for(h=1;h<f;h++)i[h]=e.F64();f=e.ABCVUI30();
i=b.constants.str;i.length=f;for(h=1;h<f;h++)i[h]=e.ABCs();f=e.ABCVUI30();i=b.constants.namespace;i.length=f;for(h=1;h<f;h++)i[h]=[e.B(),e.ABCVUI30()];f=e.ABCVUI30();i=b.constants.ns_set;i.length=f;for(h=1;h<f;h++){i[h]=[];for(var k=e.ABCVUI30(),n=0;n<k;n++)i[h].push(e.ABCVUI30())}f=e.ABCVUI30();i=b.constants.multiname;i.length=f;for(h=1;h<f;h++)switch(k=e.B(),i[h]=[k],k){case 7:case 13:i[h].push(e.ABCVUI30(),e.ABCVUI30());break;case 15:case 16:i[h].push(e.ABCVUI30());break;case 17:case 18:break;
case 9:case 14:i[h].push(e.ABCVUI30(),e.ABCVUI30());break;case 27:case 28:i[h].push(e.ABCVUI30());break;default:console.error("Unknown multiname type: "+k);break a}}f=e.ABCVUI30();for(i=0;i<f;i++)h=e.ABCVUI30(),k={paramCount:h,returnType:e.ABCVUI30(),paramTypes:e.getArray(e.ABCVUI30,h),name:e.ABCVUI30(),flags:e.B(),options:null,paramNames:null},k.flags&8&&(n=e.ABCVUI30(),k.options=e.getArrays([e.ABCVUI30,e.B],n)),k.flags&128&&(k.paramNames=e.getArray(e.ABCVUI30,h)),b.methods.push(k);f=e.ABCVUI30();
for(i=0;i<f;i++)h=e.ABCVUI30(),h=[e.ABCVUI30(),h,e.getArrays([e.ABCVUI30,e.ABCVUI30],h)],b.metadata.push(h);f=e.ABCVUI30();for(i=0;i<f;i++)h={name:e.ABCVUI30(),superName:e.ABCVUI30(),flags:e.B(),protectedNS:e.ABCVUI30(),interfaceCount:e.ABCVUI30()},h.interfaces=e.getArray(e.ABCVUI30,h.interfaceCount),h.initializer=e.ABCVUI30(),k=h.traitCount=e.ABCVUI30(),h.traits=d(k),b.instances.push(h);for(i=0;i<f;i++)h={initializer:e.ABCVUI30(),traitCount:e.ABCVUI30()},h.traits=d(h.traitCount),b.classes.push(h);
f=e.ABCVUI30();for(i=0;i<f;i++)h={initializer:e.ABCVUI30(),traitCount:e.ABCVUI30()},h.traits=d(h.traitCount),b.scripts.push(h);f=e.ABCVUI30();for(i=0;i<f;i++)h={method:e.ABCVUI30(),maxStack:e.ABCVUI30(),localCount:e.ABCVUI30(),initScopeDepth:e.ABCVUI30(),maxScopeDepth:e.ABCVUI30(),codeLength:e.ABCVUI30()},h.code=e.getArray(e.B,h.codeLength),h.exceptionCount=e.ABCVUI30(),h.exceptions=e.getArrays([e.ABCVUI30,e.ABCVUI30,e.ABCVUI30,e.ABCVUI30,e.ABCVUI30],h.exceptionCount),h.traitCount=e.ABCVUI30(),h.traits=
d(h.traitCount),b.methodBodies.push(h)}})(this);(function(d){function f(){}d=d.AlphabetJS;d.programs.AS2=f;f.prototype=Object.create(d.programs.AS1Program.prototype)})(this);(function(){})(this);
