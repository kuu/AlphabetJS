'use strict';function use(){};this.AlphabetJS={};/*

 2012/01/03- (c) yoya@awm.jp
*/
use("globals");
(function(i){i.AlphabetJS.IO=function(){this.data="";this.bit_offset=this.byte_offset=0;this.input=function(b){this.data=b};this.byteAlign=function(){this.bit_offset&&(this.byte_offset+=(this.bit_offset+7)/8|0,this.bit_offset=0)};this.byteCarry=function(){if(7<this.bit_offset)this.byte_offset+=(this.bit_offset+7)/8|0,this.bit_offset&=7;else for(;0>this.bit_offset;)this.byte_offset--,this.bit_offset+=8};this.getData=function(b){this.byteAlign();var e=this.byte_offset,g=this.data.substr(e,b);this.byte_offset=
e+b;return g};this.getUI8=function(){this.byteAlign();return this.data.charCodeAt(this.byte_offset++)&255};this.getUI16LE=function(){this.byteAlign();return this.data.charCodeAt(this.byte_offset++)&255|(this.data.charCodeAt(this.byte_offset++)&255)<<8};this.getUI32LE=function(){this.byteAlign();return this.data.charCodeAt(this.byte_offset++)&255|(this.data.charCodeAt(this.byte_offset++)&255|(this.data.charCodeAt(this.byte_offset++)&255|(this.data.charCodeAt(this.byte_offset++)&255)<<8)<<8)<<8};this.getUI16BE=
function(){this.byteAlign();return(this.data.charCodeAt(this.byte_offset++)&255)<<8|this.data.charCodeAt(this.byte_offset++)&255};this.getUIBit=function(){this.byteCarry();return this.data.charCodeAt(this.byte_offset)>>7-this.bit_offset++&1};this.getUIBitsBE=function(b){for(var e=0;b--;)e<<=1,e|=this.getUIBit();return e};this.getSIBitsBE=function(b){var e=this.getUIBitsBE(b);return(b=e&1<<b-1)?-(e^2*b-1)-1:e};this.getUIBitsLE=function(b){for(var e=0,g=0;g<b;g++)e|=this.getUIBit()<<g;return e};this.getSIBitsLE=
function(b){var e=this.getUIBitsLE(b);return(b=e&1<<b-1)?-(e^2*b-1)-1:e};this.getString=function(){var b=this.getVUI30(),e=this.data.substr(this.byte_offset,b);this.byte_offset+=b;return e};this.getVUI30=function(){this.byteAlign();for(var b=0,e,g=0;6>g&&!(e=this.data.charCodeAt(this.byte_offset++)&255,b|=(e&127)<<g,!(e>>>7));g++);return b};this.getVUI32=function(){this.byteAlign();for(var b=0,e,g=0;6>g&&!(e=this.data.charCodeAt(this.byte_offset++)&255,b|=(e&127)<<g,!(e>>>7));g++);return b};this.getVSI32=
function(){this.byteAlign();for(var b=0,e,g=0;6>g;g++)if(e=this.data.charCodeAt(this.byte_offset++)&255,b|=(e&127)<<g,!(e>>>7))return b;return(e=b&-2147483648)?-(b^2*e-1)-1:b};this.getDouble=function(){this.byteAlign();var b,e,g=-7,a=7,f=this.data.charCodeAt(this.byte_offset+7),a=a+-1;b=f&(1<<-g)-1;f>>=-g;for(g+=11;0<g;b=256*b+this.data.charCodeAt(this.byte_offset+a),a+=-1,g-=8);e=b&(1<<-g)-1;b>>=-g;for(g+=52;0<g;e=256*e+this.data.charCodeAt(this.byte_offset+a),a+=-1,g-=8);this.byte_offset+=8;if(0===
b)b=-1022;else{if(2047===b)return e?NaN:Infinity*(f?-1:1);e+=Math.pow(2,52);b-=1023}return(f?-1:1)*e*Math.pow(2,b-52)};this.getArray=function(b,e){for(var g=Array(e),a=0;a<e;a++)g[a]=b.call(this);return g};this.getArrays=function(b,e){for(var g=Array(e),a=b.length,f=0;f<e;f++){g[f]=Array(a);for(var d=0;d<a;d++)g[f][d]=b[d].call(this)}return g};this.setOffset=function(b,e){this.byte_offset=b;this.bit_offset=e};this.getOffset=function(){return{byte_offset:this.byte_offset,bit_offset:this.bit_offset}};
this.incrementOffset=function(b,e){this.byte_offset+=b;this.bit_offset+=e;this.byteCarry()}}})(this);use("io");
(function(i){i.AlphabetJS.Parser=function(b,e){function g(b){for(var c=Array(b),e=0;e<b;e++){var d=a.getVUI30(),g=a.getUI8(),f=g&15,d={name:d,attributes:g>>>4,tKind:f};c[e]=d;switch(f){case 0:case 6:d.slotId=a.getVUI30();d.typeName=a.getVUI30();d.vIndex=a.getVUI30();0!==d.vIndex&&(d.vKind=a.getUI8());break;case 4:d.slotId=a.getVUI30();d.classIndex=a.getVUI30();break;case 5:d.slotId=a.getVUI30();d.functionIndex=a.getVUI30();break;case 1:case 2:case 3:d.dispId=a.getVUI30();d.method=a.getVUI30();break;
default:console.error("Unknown instance trait kind: "+f);return}}return c}var a=new i.AlphabetJS.IO;a.input(e);var f=a.getUI16LE(),d=a.getUI16LE();console.log("Parsing ABC file of version "+d+"."+f);a:{f=a.getVUI30();d=b.constants.int;d.length=f;for(var c=1;c<f;c++)d[c]=a.getVSI32();f=a.getVUI30();d=b.constants.uint;d.length=f;for(c=1;c<f;c++)d[c]=a.getVUI32();f=a.getVUI30();d=b.constants.double;d.length=f;for(c=1;c<f;c++)d[c]=a.getDouble();f=a.getVUI30();d=b.constants.str;d.length=f;for(c=1;c<f;c++)d[c]=
a.getString();f=a.getVUI30();d=b.constants.namespace;d.length=f;for(c=1;c<f;c++)d[c]=[a.getUI8(),a.getVUI30()];f=a.getVUI30();d=b.constants.ns_set;d.length=f;for(c=1;c<f;c++){d[c]=[];for(var h=a.getVUI30(),j=0;j<h;j++)d[c].push(a.getVUI30())}f=a.getVUI30();d=b.constants.multiname;d.length=f;for(c=1;c<f;c++)switch(h=a.getUI8(),d[c]=[h],h){case 7:case 13:d[c].push(a.getVUI30(),a.getVUI30());break;case 15:case 16:d[c].push(a.getVUI30());break;case 17:case 18:break;case 9:case 14:d[c].push(a.getVUI30(),
a.getVUI30());break;case 27:case 28:d[c].push(a.getVUI30());break;default:console.error("Unknown multiname type: "+h);break a}}f=a.getVUI30();for(d=0;d<f;d++)c=a.getVUI30(),h={paramCount:c,returnType:a.getVUI30(),paramTypes:a.getArray(a.getVUI30,c),name:a.getVUI30(),flags:a.getUI8(),options:null,paramNames:null},h.flags&8&&(j=a.getVUI30(),h.options=a.getArrays([a.getVUI30,a.getUI8],j)),h.flags&128&&(h.paramNames=a.getArray(a.getVUI30,c)),b.methods.push(h);f=a.getVUI30();for(d=0;d<f;d++)c=a.getVUI30(),
c=[a.getVUI30(),c,a.getArrays([a.getVUI30,a.getVUI30],c)],b.metadata.push(c);f=a.getVUI30();for(d=0;d<f;d++)c={name:a.getVUI30(),superName:a.getVUI30(),flags:a.getUI8(),protectedNS:a.getVUI30(),interfaceCount:a.getVUI30()},c.interfaces=a.getArray(a.getVUI30,c.interfaceCount),c.initializer=a.getVUI30(),h=c.traitCount=a.getVUI30(),c.traits=g(h),b.instances.push(c);for(d=0;d<f;d++)c={initializer:a.getVUI30(),traitCount:a.getVUI30()},c.traits=g(c.traitCount),b.classes.push(c);f=a.getVUI30();for(d=0;d<
f;d++)c={initializer:a.getVUI30(),traitCount:a.getVUI30()},c.traits=g(c.traitCount),b.scripts.push(c);f=a.getVUI30();for(d=0;d<f;d++)c={method:a.getVUI30(),maxStack:a.getVUI30(),localCount:a.getVUI30(),initScopeDepth:a.getVUI30(),maxScopeDepth:a.getVUI30(),codeLength:a.getVUI30()},c.code=a.getArray(a.getUI8,c.codeLength),c.exceptionCount=a.getVUI30(),c.exceptions=a.getArrays([a.getVUI30,a.getVUI30,a.getVUI30,a.getVUI30,a.getVUI30],c.exceptionCount),c.traitCount=a.getVUI30(),c.traits=g(c.traitCount),
b.methodBodies.push(c)}})(this);use("io","abc-parser");(function(i){i.AlphabetJS.VM=function(){this.constants={"int":[0],uint:[0],"double":[0],str:[""],namespace:[null],ns_set:[null],multiname:[null]};this.methods=[];this.metadata=[];this.instances=[];this.classes=[];this.scripts=[];this.methodBodies=[]}})(this);
